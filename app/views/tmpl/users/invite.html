<div class="page">
	<div class="pageheader">
		<h2>{{page.title}} <span></span></h2>
		<div class="page-bar">
			<ul class="page-breadcrumb">
				<li>
          			<a ui-sref="efinding.dashboard.generic"> {{main.title}}</a>
        		</li>
				<li>
					<a href="javascript:;">Usuarios</a>
				</li>
				<li>
					<a>{{page.title}}</a>
				</li>
			</ul>
		</div>
	</div>
	<div class="pagecontent">
		<div class="row">
			<div class="col-md-12">
				<section class="tile" fullscreen="isFullscreen06">
					<div class="tile-body">
						<div class="container w-420 p-20 bg-blue-ps-3 mt-40 text-center br-25" style="background-color: #FDE0C0">
							<h2 class="text-light text-black">{{page.title}}</h2>
							<h4 class="text-black">Ingresa el mail de los usuarios que quieres invitar. Puede ser m√°s de uno</h4>
							<h3 class="text-light text-red" ng-show="page.msg.show"> {{page.msg.text}}</h3>
							<div class="col-md-12">
								<ul class="list-unstyled">
									<li><p ng-repeat="email in responseInvitations"><fa name="{{email.icon}}"></fa> {{email.email}}</p></li>
								</ul>
								<form class="form-horizontal form-validation" name="form" novalidate>
									<div class="form-group" ng-repeat="formGroup in page.formGroups.invite">
										<div class="col-sm-12">
											<input class="form-control rounded" type="email" placeholder="Email de usuario..." ng-model="formGroup.email" ng-change="validateMailAndRol({{formGroup.index}})" required>
											<div style="display: inline-block">
												<label class="checkbox checkbox-custom-alt text-black" style="display: inline-block; padding-right: 7px" ng-repeat="role in roles"> 
													<input type="radio" value="{{role.id}}" name="{{formGroup.index}}" ng-model="formGroup.roleId" ng-change="validateMailAndRol({{formGroup.index}})" required><i></i> {{role.name}}
												</label>
											</div>
											<br ng-show="is_superuser">
											<label ng-show="is_superuser" class="checkbox checkbox-custom-alt text-black">
							                    <input ng-model="formGroup.is_superuser" type="checkbox"><i></i> Superusuario
							                </label>
										</div>
									</div>
									<div class="col-md-11" >
										<button class="btn btn-green-ps br-20 text-md pl-20 pr-20" type="submit" ng-disabled="form.$invalid" ng-click="sendInvitations({success: true,detail: 'OK'})">Enviar</button>	
									</div>				
								</form>
							</div>
						</div>
					</div>
				</section>
			</div>
		</div>
	</div>
	<script type="text/ng-template" id="loadCategories.html">
		<div class="modal-header text-gray">
			<h3 class="text-center">Invitar usuarios</h3>
		</div>
		<div class="modal-body text-gray">
			<div class="row">
				<div class="col-md-12">
					<h4 class="text-center">Carga masiva por csv</h4>
					<form name="form" class="form-validation form-horizontal" role="form" novalidate>
						<div class="form-group">
							<div class="col-md-12">
								<input type="file" class="form-control rounded" file-model="modal.csvFile" ng-model="modal.csvFile" accept=".xls,.xlsx,.csv,.txt" required>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
		<div class="modal-footer">
			<button class="btn btn-success br-20 pl-20 pr-20" type="submit" ng-disabled="form.$invalid || modal.buttons.load.disabled" ng-click="loadCategories()">{{modal.buttons.load.text}}</button>
			<button class="btn btn-default br-20 pl-20 pr-20" type="button" ng-click="cancel()" >Cerrar</button>
		</div>
	</script>
	<script type="text/ng-template" id="summary.html">
		<div class="modal-header text-gray">
			<h3 class="text-center">Resumen</h3>
		</div>
		<div class="modal-body">
			<div ng-show="modal.errors.length">
				<h4 class="text-center mb-20">No enviados</h4>
				<ul ng-repeat="error in modal.errors">
					<li>
						<p>{{error.email}}</p>
						<p>Error en la fila {{error.rowNumber}}</p>
						<p>Revise el campo <strong>{{error.field}}</strong></p>
					</li>
				</ul>

				<hr>
			</div>
			<h4 class="text-center mb-20">Enviados</h4>
			<ul ng-repeat="success in modal.successes">
				<li>
					<p>{{success.email}}</p>
				</li>
			</ul>
		</div>
		<div class="modal-footer">
			<button class="btn btn-default btn-rounded-10 mb-10" type="button" ng-click="cancel()">Cerrar</button>
		</div>
	</script>
</div>